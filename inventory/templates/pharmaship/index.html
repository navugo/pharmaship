{% extends "layout.html" %} {% load i18n %} {% block addon %} {% load staticfiles %}
<link rel="stylesheet" type="text/css" href='{% static "pharmaship/home.css" %}'>
<script src='{% static "js/home.js" %}'></script>
{% endblock %} {% block content %}
<h2>{% trans "Medicines Inventory Status" %}</h2>

<div class="accordion">
    <h3>
        <span class="title">{% trans "Medicines in short supply:" %}</span>
        <span class="count {% if molecule.short_supply|length > 0 %}error{% else %}good{% endif %}">{{ molecule.short_supply|length }}</span>
    </h3>
    {% if molecule.short_supply|length > 0 %}
    <div>
        <table>
            <tr>
                <th>{% trans "Molecule" %}</th>
                <th class="center">{% trans "Required Quantity" %}</th>
                <th class="center">{% trans "Current Quantity" %}</th>
            </tr>
            {% for item in molecule.short_supply %}
            <tr>
                <td>{{ item.molecule }}</td>
                <td class="center">{{ item.reqqty }}</td>
                <td class="center">{{ item.qty }}</td>
            </tr>
            {% endfor %}
        </table>
    </div>
    {% endif %}
    <h3>
        <span class="title">{% trans "Expired medicines:" %}</span>
        <span class="count {% if molecule.expired|length > 0 %}error{% else %}good{% endif %}">{{ molecule.expired|length }}</span>
    </h3>
    {% if molecule.expired|length > 0 %}
    <div>
        <table>
            <tr>
                <th>{% trans "Medicine" %}</th>
            </tr>
            {% for item in molecule.expired %}
            <tr>
                <td>{{ item }}</td>
            </tr>
            {% endfor %}
        </table>
    </div>
    {% endif %}
    <h3>
        <span class="title">{% trans "Medicines reaching expiry:" %}</span>
        <span class="count {% if molecule.reaching_expiry|length > 0 %}warning{% else %}good{% endif %}">{{ molecule.reaching_expiry|length }}</span>
    </h3>
    <!--    <ul class="home">
        <li class="header {% if molecule.reaching_expiry|length > 0 %}bold{% endif %}">{% trans "Medicines reaching expiry:" %}</li>
        <li class="top {% if molecule.reaching_expiry|length > 0 %}warning{% else %}good{% endif %}">{{ molecule.reaching_expiry|length }}</li>
        {% if molecule.reaching_expiry|length > 0 %}
        <li>({% with molecule.reaching_expiry|first as item %}{{ item.exp_date }}{% endwith %})</li>
        {% endif %}
    </ul>-->
    {% if molecule.reaching_expiry|length > 0 %}
    <div>
        <table>
            <tr>
                <th>{% trans "Medicine" %}</th>
            </tr>
            {% for item in molecule.reaching_expiry %}
            <tr>
                <td>{{ item }}</td>
            </tr>
            {% endfor %}
        </table>
    </div>
    {% endif %}
    <h3>
        <span class="title">{% trans "Non conform medicines:" %}</span>
        <span class="count {% if molecule.nc|length > 0 %}error{% else %}good{% endif %}">{{ molecule.nc|length }}</span>
    </h3>
    {% if molecule.nc|length > 0 %}
    <div>
        <table>
            <tr>
                <th>{% trans "Medicine" %}</th>
                <th>{% trans "Non Conformity" %}</th>
            </tr>
            {% for item in molecule.nc %}
            <tr>
                <td>{{ item }}</td>
                <td>{% if item.nc_molecule %} {% trans "Molecule:" %} {{ item.nc_molecule }} {% endif %} {% if item.nc_composition %} {% trans "Composition:" %} {{ item.nc_composition }} {% endif %}</td>
            </tr>
            {% endfor %}
        </table>
    </div>
    {% endif %}
    <!--
<div class="line">
    <ul class="home">
        <li class="header {% if molecule.ordered|length > 0 %}bold{% endif %}">{% trans "Ordered medicines:" %}</li>
        <li class="top {% if molecule.ordered|length > 0 %}warning{% else %}good{% endif %}">{{ molecule.ordered|length }}</li>
        <li>{% trans "Last order:" %} 12 avril 2013, fully received</li>
    </ul>
</div>
-->
</div>
<h2>{% trans "Medical Equipment Inventory Status" %}</h2>
<div class="accordion">
    <h3>
        <span class="title">{% trans "Equipment in short supply:" %}</span>
        <span class="count {% if equipment.short_supply|length > 0 %}error{% else %}good{% endif %}">{{ equipment.short_supply|length }}</span>
    </h3>
    <div>
        {% if equipment.short_supply|length > 0 %}
        <table>
            <tr>
                <th>{% trans "Item" %}</th>
                <th class="center">{% trans "Required Quantity" %}</th>
                <th class="center">{% trans "Current Quantity" %}</th>
            </tr>
            {% for item in equipment.short_supply %}
            <tr>
                <td>{{ item.equipment }}</td>
                <td class="center">{{ item.reqqty }}</td>
                <td class="center">{{ item.qty }}</td>
            </tr>
            {% endfor %}
        </table>
        {% endif %}
    </div>

    <h3>
        <span class="title">{% trans "Expired articles:" %}</span>
        <span class="count {% if equipment.expired|length > 0 %}error{% else %}good{% endif %}">{{ equipment.expired|length }}</span>
    </h3>
    <div>
        {% if equipment.expired|length > 0 %}
        <table>
            <tr>
                <th>{% trans "Equipment" %}</th>
            </tr>
            {% for item in equipment.expired %}
            <tr>
                <td>{{ item }}</td>
            </tr>
            {% endfor %}
        </table>
        {% endif %}
    </div>

    <h3>
        <span class="title">{% trans "Articles reaching expiry:" %}</span>
        <span class="count {% if equipment.reaching_expiry|length > 0 %}warning{% else %}good{% endif %}">{{ equipment.reaching_expiry|length }}</span>
    </h3>
    <div>
        {% if equipment.reaching_expiry|length > 0 %}
        <table>
            <tr>
                <th>{% trans "Article" %}</th>
            </tr>
            {% for item in equipment.reaching_expiry %}
            <tr>
                <td>{{ item }}</td>
            </tr>
            {% endfor %}
        </table>
        {% endif %}
    </div>

    <h3>
        <span class="title">{% trans "Non conform articles:" %}</span>
        <span class="count {% if equipment.nc|length > 0 %}error{% else %}good{% endif %}">{{ equipment.nc|length }}</span>
    </h3>
    <div>
        {% if equipment.nc|length > 0 %}
        <table>
            <tr>
                <th>{% trans "Article" %}</th>
                <th>{% trans "Non Conformity" %}</th>
            </tr>
            {% for item in equipment.nc %}
            <tr>
                <td>{{ item }}</td>
                <td>{{ item.nc_packaging }}</td>
            </tr>
            {% endfor %}
        </table>
        {% endif %}
    </div>
    <!--
<div class="line">
    <ul class="home">
        <li class="header {% if equipment.ordered|length > 0 %}bold{% endif %}">{% trans "Ordered equipments:" %}</li>
        <li class="top {% if equipment.ordered|length > 0 %}warning{% else %}good{% endif %}">{{ equipment.ordered|length }}</li>
        <li>{% trans "Last order:" %} 12 avril 2013, waiting for reception</li>
    </ul>
</div>
-->
</div>
{% endblock %}
